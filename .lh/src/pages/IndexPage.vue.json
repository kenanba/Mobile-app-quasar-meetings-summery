{
    "sourceFile": "src/pages/IndexPage.vue",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 3,
            "patches": [
                {
                    "date": 1764512431861,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1764512441877,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,55 +0,0 @@\n-<template>\n-  <q-page class=\"row items-center justify-evenly\">\n-    <example-component\n-      title=\"Example component\"\n-      active\n-      :todos=\"todos\"\n-      :meta=\"meta\"\n-    ></example-component>\n-  </q-page>\n-</template>\n-\n-<script lang=\"ts\">\n-import { defineComponent, ref } from 'vue';\n-import type { Todo, Meta } from 'components/models';\n-import ExampleComponent from 'components/ExampleComponent.vue';\n-\n-export default defineComponent({\n-  name: 'IndexPage',\n-\n-  components: {\n-    ExampleComponent,\n-  },\n-a\n-  setup() {\n-    const todos = ref<Todo[]>([\n-      {\n-        id: 1,\n-        content: 'ct1',\n-      },\n-      {\n-        id: 2,\n-        content: 'ct2',\n-      },\n-      {\n-        id: 3,\n-        content: 'ct3',\n-      },\n-      {\n-        id: 4,\n-        content: 'ct4',\n-      },\n-      {\n-        id: 5,\n-        content: 'ct5',\n-      },\n-    ]);\n-\n-    const meta = ref<Meta>({\n-      totalCount: 1200,\n-    });\n-\n-    return { todos, meta };\n-  },\n-});\n-</script>\n\\ No newline at end of file\n"
                },
                {
                    "date": 1764512450266,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,3 +1,7 @@\n <template>\n-  \n+\n </template>\n+\n+<script>\n+\n+</script>\n"
                },
                {
                    "date": 1764512481307,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -123,6 +123,187 @@\n </div>\n </template>\n \n <script>\n+  // Ensure scripts are loaded before execution\n+    document.addEventListener('DOMContentLoaded', () => {\n+        const { createApp, ref, onMounted } = Vue;\n+        // Access Quasar global directly inside setup or here\n+        const md = window.markdownit();\n \n+        const app = createApp({\n+            setup() {\n+                const $q = Quasar.useQuasar();\n+\n+                // State\n+                const transcript = ref('');\n+                const summary = ref('');\n+                const isRecording = ref(false);\n+                const loading = ref(false);\n+                const showSettings = ref(false);\n+                const apiKey = ref(localStorage.getItem('gemini_api_key') || '');\n+\n+                // Speech Recognition Setup\n+                let recognition = null;\n+\n+                onMounted(() => {\n+                    if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {\n+                        const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;\n+                        recognition = new SpeechRecognition();\n+                        recognition.continuous = true;\n+                        recognition.interimResults = true;\n+                        recognition.lang = 'de-DE'; // German\n+\n+                        recognition.onresult = (event) => {\n+                            let interimTranscript = '';\n+                            let finalTranscript = '';\n+\n+                            for (let i = event.resultIndex; i < event.results.length; ++i) {\n+                                if (event.results[i].isFinal) {\n+                                    finalTranscript += event.results[i][0].transcript;\n+                                } else {\n+                                    interimTranscript += event.results[i][0].transcript;\n+                                }\n+                            }\n+\n+                            // Append final results to main transcript\n+                            if (finalTranscript) {\n+                                transcript.value += (transcript.value ? ' ' : '') + finalTranscript;\n+                            }\n+                        };\n+\n+                        recognition.onerror = (event) => {\n+                            console.error(\"Speech Error:\", event.error);\n+                            isRecording.value = false;\n+                            $q.notify({\n+                                color: 'negative',\n+                                message: 'Fehler bei der Spracherkennung: ' + event.error\n+                            });\n+                        };\n+\n+                        recognition.onend = () => {\n+                            // If user didn't manually stop, try to restart (for continuous feeling)\n+                            if (isRecording.value) {\n+                                try {\n+                                    recognition.start();\n+                                } catch (e) {\n+                                    isRecording.value = false;\n+                                }\n+                            }\n+                        };\n+                    } else {\n+                        $q.notify({\n+                            color: 'negative',\n+                            message: 'Dein Browser unterstÃ¼tzt keine Web Speech API.'\n+                        });\n+                    }\n+                });\n+\n+                const toggleRecording = () => {\n+                    if (!recognition) return;\n+\n+                    if (isRecording.value) {\n+                        isRecording.value = false;\n+                        recognition.stop();\n+                    } else {\n+                        isRecording.value = true;\n+                        recognition.start();\n+                        transcript.value = '';\n+                        summary.value = '';\n+                    }\n+                };\n+\n+                const clearAll = () => {\n+                    transcript.value = '';\n+                    summary.value = '';\n+                    isRecording.value = false;\n+                };\n+\n+                const renderMarkdown = (text) => {\n+                    return md.render(text);\n+                }\n+\n+                const copyToClipboard = (text) => {\n+                    const el = document.createElement('textarea');\n+                    el.value = text;\n+                    document.body.appendChild(el);\n+                    el.select();\n+                    document.execCommand('copy');\n+                    document.body.removeChild(el);\n+                    $q.notify({ color: 'green', message: 'Kopiert!', icon: 'check' });\n+                };\n+\n+                // Gemini API Call\n+                const generateSummary = async () => {\n+                    if (!apiKey.value) {\n+                        showSettings.value = true;\n+                        $q.notify({ color: 'warning', message: 'Bitte gib zuerst deinen API Key ein.' });\n+                        return;\n+                    }\n+\n+                    localStorage.setItem('gemini_api_key', apiKey.value);\n+                    loading.value = true;\n+\n+                    const prompt = `\n+    Du bist ein professioneller Assistent. Deine Aufgabe ist es, das folgende gesprochene Transkript zu bereinigen und zusammenzufassen.\n+    Erstelle eine Struktur:\n+    1. **Kernaussage**: Ein Satz, worum es ging.\n+    2. **Details**: Stichpunkte der wichtigsten Informationen.\n+    3. **Action Items**: Falls Aufgaben genannt wurden (sonst weglassen).\n+\n+    Hier ist das Transkript:\n+    \"${transcript.value}\"\n+                    `;\n+\n+                    try {\n+                        // Using Gemini 1.5 Flash as requested, suitable for user provided keys\n+                        const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${apiKey.value}`, {\n+                            method: 'POST',\n+                            headers: {\n+                                'Content-Type': 'application/json'\n+                            },\n+                            body: JSON.stringify({\n+                                contents: [{\n+                                    parts: [{ text: prompt }]\n+                                }]\n+                            })\n+                        });\n+\n+                        const data = await response.json();\n+\n+                        if (data.error) {\n+                            throw new Error(data.error.message);\n+                        }\n+\n+                        const resultText = data.candidates[0].content.parts[0].text;\n+                        summary.value = resultText;\n+\n+                    } catch (error) {\n+                        $q.notify({\n+                            color: 'negative',\n+                            message: 'Fehler bei der Zusammenfassung: ' + error.message\n+                        });\n+                    } finally {\n+                        loading.value = false;\n+                    }\n+                };\n+\n+                return {\n+                    transcript,\n+                    summary,\n+                    isRecording,\n+                    loading,\n+                    showSettings,\n+                    apiKey,\n+                    toggleRecording,\n+                    generateSummary,\n+                    clearAll,\n+                    renderMarkdown,\n+                    copyToClipboard\n+                };\n+            }\n+        });\n+\n+        app.use(Quasar);\n+        app.mount('#q-app');\n+    });\n </script>\n"
                }
            ],
            "date": 1764512431860,
            "name": "Commit-0",
            "content": "<template>\n  <q-page class=\"row items-center justify-evenly\">\n    <example-component\n      title=\"Example component\"\n      active\n      :todos=\"todos\"\n      :meta=\"meta\"\n    ></example-component>\n  </q-page>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, ref } from 'vue';\nimport type { Todo, Meta } from 'components/models';\nimport ExampleComponent from 'components/ExampleComponent.vue';\n\nexport default defineComponent({\n  name: 'IndexPage',\n\n  components: {\n    ExampleComponent,\n  },\na\n  setup() {\n    const todos = ref<Todo[]>([\n      {\n        id: 1,\n        content: 'ct1',\n      },\n      {\n        id: 2,\n        content: 'ct2',\n      },\n      {\n        id: 3,\n        content: 'ct3',\n      },\n      {\n        id: 4,\n        content: 'ct4',\n      },\n      {\n        id: 5,\n        content: 'ct5',\n      },\n    ]);\n\n    const meta = ref<Meta>({\n      totalCount: 1200,\n    });\n\n    return { todos, meta };\n  },\n});\n</script>\n"
        }
    ]
}